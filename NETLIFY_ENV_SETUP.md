# Netlify環境変数設定ガイド

## 問題の概要
デプロイ後にフッターのサーバー稼働状況が正しく表示されない問題があります。これは、Netlifyで環境変数が設定されていないことが原因です。

## 解決手順

### 1. Netlifyダッシュボードにアクセス
1. [Netlify](https://app.netlify.com/) にログイン
2. 該当するプロジェクトを選択

### 2. 環境変数を設定
1. **Site settings** → **Environment variables** に移動
2. 以下の環境変数を追加：

#### 必須環境変数
```
MINECRAFT_SERVER_HOST = 115.36.215.137
MINECRAFT_SERVER_PORT = 19138
```

### 3. 環境変数の確認方法
設定後、以下の方法で確認できます：

#### ブラウザの開発者ツールで確認
1. サイトを開く
2. F12キーで開発者ツールを開く
3. Consoleタブでログを確認
4. 以下のようなログが表示されることを確認：
```
🔧 環境変数確認:
  - MINECRAFT_SERVER_HOST: 115.36.215.137
  - MINECRAFT_SERVER_PORT: 19138
```

#### APIエンドポイントで直接確認
ブラウザで以下のURLにアクセス：
```
https://your-site.netlify.app/api/minecraft-status
```

### 4. デプロイの再実行
環境変数を設定した後、新しいデプロイを実行：
1. Netlifyダッシュボードで **Deploys** タブを開く
2. **Trigger deploy** → **Deploy site** をクリック

### 5. トラブルシューティング

#### 環境変数が反映されない場合
1. デプロイが完了するまで待つ（通常5-10分）
2. ブラウザのキャッシュをクリア
3. 強制リロード（Ctrl+F5 または Cmd+Shift+R）

#### サーバーが停止中と表示される場合
1. 実際のMinecraftサーバーが稼働しているか確認
2. サーバーアドレスとポートが正しいか確認
3. ファイアウォールの設定を確認

### 6. ログの確認
Netlifyの **Functions** タブでログを確認：
1. **Functions** タブを開く
2. **minecraft-status** 関数のログを確認
3. エラーメッセージがあれば対応

## 現在の設定値
- **サーバーホスト**: 115.36.215.137
- **サーバーポート**: 19138
- **API URL**: https://api.mcsrvstat.us/bedrock/3/115.36.215.137:19138

## 注意事項
- 環境変数は機密情報なので、GitHubにはコミットしない
- 本番環境とローカル環境で異なる値を使用する場合がある
- サーバーアドレスが変更された場合は、この設定も更新する必要がある 